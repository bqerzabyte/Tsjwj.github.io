<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login</title>
<script src="https://accounts.google.com/gsi/client" async defer></script>
<script type="text/javascript" src="https://cdn.emailjs.com/dist/email.min.js"></script>
<link rel="stylesheet" href="style.css">
</head>
<body>
<div id="login-container">
  <h2>Sign Up</h2>
  <div id="g_id_onload"
       data-client_id="912894745948-ckbgjohjoopt3j13pvsblokk74gsojpq.apps.googleusercontent.com"
       data-callback="handleCredentialResponse">
  </div>
  <div class="g_id_signin" data-type="standard"></div>
</div>

<script src="app.js"></script>
<script>
  emailjs.init("28feFNTo2jE91PZYP"); // تهيئة EmailJS

  function handleCredentialResponse(response) {
      const data = parseJwt(response.credential);

      // حفظ بيانات المستخدم في الجلسة
      sessionStorage.setItem('loggedIn', 'true');
      sessionStorage.setItem('userName', data.name);
      sessionStorage.setItem('userEmail', data.email);
      sessionStorage.setItem('userPicture', data.picture);

      // إرسال البريد التلقائي
      sendLoginEmail(data.name, data.email);

      // بعد ثانيتين، الانتقال للصفحة الرئيسية
      setTimeout(() => {
          window.location.href = "index.html";
      }, 2000);
  }
</script>
</body>
</html>       data-client_id="912894745948-ckbgjohjoopt3j13pvsblokk74gsojpq.apps.googleusercontent.com"
       data-callback="handleCredentialResponse">
  </div>
  <div class="g_id_signin" data-type="standard"></div>
</div>

<script>
function handleCredentialResponse(response) {
    // تخزين حالة الدخول
    sessionStorage.setItem('loggedIn', 'true');
    // تحويل إلى الصفحة الرئيسية
    window.location.href = "index.html";
}
</script>
</body>
</html>
